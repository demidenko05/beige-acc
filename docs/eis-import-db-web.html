<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<!--
Licensed to the Apache Software Foundation (ASF) under one
or more contributor license agreements.  See the NOTICE file
distributed with this work for additional information
regarding copyright ownership.  The ASF licenses this file
to you under the Apache License, Version 2.0 (the
"License"); you may not use this file except in compliance
with the License.  You may obtain a copy of the License at

  http://www.apache.org/licenses/LICENSE-2.0

Unless required by applicable law or agreed to in writing,
software distributed under the License is distributed on an
"AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, either express or implied.  See the License for the
specific language governing permissions and limitations
under the License.
-->

<!-- Generated by Apache Maven Doxia Site Renderer 1.4 at 2021-02-05 -->
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <title>Beigesoft - 
    Beigesoft™ Enterprise Information System</title>
    <style type="text/css" media="all">
      @import url("./css/bootstrap.min.css");
      @import url("./css/bootstrap-theme.min.css");
      @import url("./css/site.css");
    </style>
    <link rel="stylesheet" href="./css/print.css" type="text/css" media="print" />
    <meta name="Date-Revision-yyyymmdd" content="20210205" />
    <meta http-equiv="Content-Language" content="en" />
        
          <link rel="icon" href="images/favicon.png">
  </head>
  <body>
      <img class="logo-right" src="images/logo.png" alt="${project.organization.name} logo">
    <div class="page-header">
      <h1>Beigesoft™ Enterprise Information System Java code. <small>      
                    
                <div class="xleft">
        <span id="publishDate">Last Published: 2021-02-05</span>
                  &nbsp;| <span id="projectVersion">Version: 1.2-SNAPSHOT</span>
                      </div>
      </small></h1>
    </div>
    <div id="leftColumn" class="list-group">
              
                    
                                <h5>Project Documentation</h5>
                  
                                                                                                                                                                                                                                                                        <a href="project-info.html" class="list-group-item"><span class='glyphicon glyphicon-expand' aria-hidden='true'></span>  Project Information</a>
                                                                                                               <a href="project-reports.html" class="list-group-item"><span class='glyphicon glyphicon-expand' aria-hidden='true'></span>  Project Reports</a>
                   
                       <h5>Articles</h5>
                  
                                  <a href="eis-bobs-pizza.html" class="list-group-item">Beigesoft™ EIS, Bob's pizza example</a>
                                     <a href="eis-iv.html" class="list-group-item">Пример ведения коммерческого бухгалтерского учета в Беижсофт™ ИСП</a>
                                     <a href="blcexmplen.html" class="list-group-item">Beigesoft™ libraries for rapid development of cross-platform financial WEB-applications.</a>
                                     <a href="blcexmplru.html" class="list-group-item">Беижсофт™ библиотеки для быстрой разработки кроссс-платформенного финансового ПО с ВЕБ-интерфейсом</a>
                                     <a href="bslfsc.html" class="list-group-item">Beigesoft™ Linux From Source Code</a>
                                     <a href="bslfscru.html" class="list-group-item">Беижсофт™ Линукс из исходных кодов</a>
                                     <a href="bsplay.html" class="list-group-item">Beigesoft™ multimedia player</a>
                                     <a href="bs-ctsp-in-c.html" class="list-group-item">Type-safe programming complex high-level applications in C.</a>
                                     <a href="pdesign.html" class="list-group-item">Programming approaches.</a>
                                     <a href="data-protect.html" class="list-group-item">Data protection.</a>
             
                             <a href="http://maven.apache.org/" title="Built by Maven" class="poweredBy">
        <img class="poweredBy" alt="Built by Maven" src="./images/logos/maven-feather.png" />
      </a>
                   
                    
          </div>
    <div id="bodyColumn">
        

  

    <div class="section">
<h2>Import of an EIS database by using the WEB-service.<a name="Import_of_an_EIS_database_by_using_the_WEB-service."></a></h2>

    
<p><b>Keywords: Import of a database by using a WEB-service.</b></p>

      
<p><b>* You can not use the A-Jetty SSL (HTTPS) certificate for any Internet resource (site or WEB-service)! You can use it on Tomcat only for testing purposes with disabled Internet connection!</b></p>

      
<p>If you decided to move from lite standalone (single user) SQlite version of Beigesoft&#x2122; EIS
      into a high performance enterprise-ready database MySql or Postgresql, then use the WEB-service in the <b>Menu-&gt;...-&gt;Import database</b></p>
      
<p>
        Bob decided to check it out. He installed the Apache Tomcat and the Postgresql according to <a class="externalLink" href="https://github.com/demidenko05/beige-accweb">https://github.com/demidenko05/beige-accweb README.txt</a>.
        He download the file <b>beige-accweb.war</b> from the central Maven repository <a class="externalLink" href="https://search.maven.org/#search%7Cga%7C1%7Cg%3A%22org.beigesoft%22">https://search.maven.org/#search%7Cga%7C1%7Cg%3A%22org.beigesoft%22</a>
        and put it into the <b>webapps</b> folder of the Apache Tomcat.
        Bob installed the Bouncy Castle crypto-provider in static way (see <a href="eis-settings.html">Software installation...</a>),
        then he copied <b>ajettykeystore.444</b> file into <b>[tomcat-home]/conf</b> folder and uncommented and changed SSL connector in the <b>[tomcat-home]/conf/server.xml</b>:
        </p>
<div>
<pre style="white-space:pre-wrap">
&lt;Connector port=&quot;8443&quot; protocol=&quot;org.apache.coyote.http11.Http11Protocol&quot;
   maxThreads=&quot;150&quot; SSLEnabled=&quot;true&quot; scheme=&quot;https&quot; secure=&quot;true&quot;
   keyAlias=&quot;AJettyHttps444&quot;
   keystoreFile=&quot;conf/ajettykeystore.444&quot;
   keystorePass=&quot;**************&quot;
   keystoreType=&quot;PKCS12&quot;
   keystoreProvider=&quot;BC&quot; 
   clientAuth=&quot;false&quot; sslProtocol=&quot;TLS&quot; /&gt;
        </pre></div>
        Bob checks out that he can not read the <b>server.xml</b> file under his regular account, because this file holds the keystore password.
      
      
<p>
        Bob added the <b>ajetty-ca.pem</b> into the Java's trusted CA keystore:
        </p>
<div>
<pre style="white-space:pre-wrap">
keytool -import -trustcacerts -alias ajettyca -file &quot;ajetty-ca.pem&quot; -keystore /usr/lib/jvm/java-8-openjdk-amd64/jre/lib/security/cacerts
        </pre></div>
  * on Java11 run:
        
<div>
<pre style="white-space:pre-wrap">
keytool -importcert -trustcacerts -alias ajettyca -file &quot;ajetty-ca[###].pem&quot; -cacerts
        </pre></div>        
  * on MS Windows open the PowerShell as ADMIN in the Beigesoft EIS folder and run:
        
<div>
<pre style="white-space:pre-wrap">
&amp; &quot;C:\Program Files (x86)\Java\jre[version#8]\bin\keytool.exe&quot; -import -trustcacerts -alias ajettyca -file &quot;ajetty-ca.pem&quot; -keystore &quot;C:\Program Files (x86)\Java\jre[version#8]\lib\security\cacerts&quot;
        </pre></div>        
        The default password to this keystore is <b>changeit</b>. Adding a CA certificate to this keystore requires ROOT permission,
        so do not worry about the keystore password. Never use this keystore to store private keys!
      
      
<p>For Java11 you should add Bouncy Castle jars in the system classpath Tomcat by hand. To do it, create <b>setenv.sh</b> in <b>bin</b> folder (see <b>catalina.sh</b>):
      </p>
<div>
<pre style="white-space:pre-wrap">
#!/bin/bash
export CLASSPATH=/home/[you]/.m2/repository/org/bouncycastle/bcprov-jdk15on/1.67/bcprov-jdk15on-1.67.jar:/home/[you]/.m2/repository/org/bouncycastle/bcpkix-jdk15on/1.67/bcpkix-jdk15on-1.67.jar
      </pre></div>
      
      
<p>
        He launched the SQlite version Beigesoft&#x2122; EIS on 8444 port (source local database). Then he started Tomcat and opened the address <a class="externalLink" href="https://localhost:8443/beige-accweb/">https://localhost:8443/beige-accweb/</a>
        He pushed the <b>Menu -&gt; ... -&gt; Import database</b>, then  entered &quot;URL of WEB-service of source database:&quot; as &quot;localhost:8444/bsa8444/adm/xml&quot; and filled user/password fields then pressed &quot;submit&quot;:</p>
      
<p align="center"><img src="images/importdb1.png" style="max-width: 100%" alt="" /></p>
      
      
<p>The import report is:</p>
      
<p align="center"><img src="images/importdb2.png" alt="Beigesoft™ EIS import database" style="max-width: 100%" /></p>
      
      
<p>The data is the same:</p>
      
<p align="center"><img src="images/importdb3.png" style="max-width: 100%" alt="" /></p>
      
<p align="center"><img src="images/importdb4.png" style="max-width: 100%" alt="" /></p>
      
      
<p>Local WEB-server A-Jetty <b>https://127.0.0.1:8444/bsa8444</b> is not available for cloud (Internet).
      Apache Tomcat uses an Internet-available IP address, so your data will be Internet-accessible, and you can import data from your Tomcat (on your computer) into a Beigesoft&#x2122; EIS deployed on any other cloud JEE server.
      But you can not use the A-Jetty HTTPS certificate for it! You must make a new HTTPS certificate by yourself.
      You can do it (for example) by using the Bouncy Castle Crypto Java API or the OpenSSL.
      </p>
    </div>

  


    </div>
    <div class="clear">
    </div>
    <hr/>
    <div class="footer">
              Copyright &#169;                   2019&#x2013;2021.
           All rights reserved.      
                    
                </div>
  </body>
</html>
