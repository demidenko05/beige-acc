<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<!--
Licensed to the Apache Software Foundation (ASF) under one
or more contributor license agreements.  See the NOTICE file
distributed with this work for additional information
regarding copyright ownership.  The ASF licenses this file
to you under the Apache License, Version 2.0 (the
"License"); you may not use this file except in compliance
with the License.  You may obtain a copy of the License at

  http://www.apache.org/licenses/LICENSE-2.0

Unless required by applicable law or agreed to in writing,
software distributed under the License is distributed on an
"AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, either express or implied.  See the License for the
specific language governing permissions and limitations
under the License.
-->

<!-- Generated by Apache Maven Doxia Site Renderer 1.4 at 2021-02-05 -->
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <title>Beigesoft - 
    Beigesoft™ Linux From Source Code (LFSC).</title>
    <style type="text/css" media="all">
      @import url("./css/bootstrap.min.css");
      @import url("./css/bootstrap-theme.min.css");
      @import url("./css/site.css");
    </style>
    <link rel="stylesheet" href="./css/print.css" type="text/css" media="print" />
    <meta name="Date-Revision-yyyymmdd" content="20210205" />
    <meta http-equiv="Content-Language" content="en" />
        
          <link rel="icon" href="images/favicon.png">
  </head>
  <body>
      <img class="logo-right" src="images/logo.png" alt="${project.organization.name} logo">
    <div class="page-header">
      <h1>Beigesoft™ Enterprise Information System Java code. <small>      
                    
                <div class="xleft">
        <span id="publishDate">Last Published: 2021-02-05</span>
                  &nbsp;| <span id="projectVersion">Version: 1.2-SNAPSHOT</span>
                      </div>
      </small></h1>
    </div>
    <div id="leftColumn" class="list-group">
              
                    
                                <h5>Project Documentation</h5>
                  
                                                                                                                                                                                                                                                                        <a href="project-info.html" class="list-group-item"><span class='glyphicon glyphicon-expand' aria-hidden='true'></span>  Project Information</a>
                                                                                                               <a href="project-reports.html" class="list-group-item"><span class='glyphicon glyphicon-expand' aria-hidden='true'></span>  Project Reports</a>
                   
                       <h5>Articles</h5>
                  
                                  <a href="eis-bobs-pizza.html" class="list-group-item">Beigesoft™ EIS, Bob's pizza example</a>
                                     <a href="eis-iv.html" class="list-group-item">Пример ведения коммерческого бухгалтерского учета в Беижсофт™ ИСП</a>
                                     <a href="blcexmplen.html" class="list-group-item">Beigesoft™ libraries for rapid development of cross-platform financial WEB-applications.</a>
                                     <a href="blcexmplru.html" class="list-group-item">Беижсофт™ библиотеки для быстрой разработки кроссс-платформенного финансового ПО с ВЕБ-интерфейсом</a>
                                       <a href="bslfsc.html" class="list-group-item active disabled">Beigesoft™ Linux From Source Code</a>
                                     <a href="bslfscru.html" class="list-group-item">Беижсофт™ Линукс из исходных кодов</a>
                                     <a href="bsplay.html" class="list-group-item">Beigesoft™ multimedia player</a>
                                     <a href="bs-ctsp-in-c.html" class="list-group-item">Type-safe programming complex high-level applications in C.</a>
                                     <a href="pdesign.html" class="list-group-item">Programming approaches.</a>
                                     <a href="data-protect.html" class="list-group-item">Data protection.</a>
             
                             <a href="http://maven.apache.org/" title="Built by Maven" class="poweredBy">
        <img class="poweredBy" alt="Built by Maven" src="./images/logos/maven-feather.png" />
      </a>
                   
                    
          </div>
    <div id="bodyColumn">
        

  

    <div class="section">
<h3>Beigesoft&#x2122; Linux From Source Code (LFSC).<a name="Beigesoft_Linux_From_Source_Code_LFSC."></a></h3>
    
    
<div class="section">
<h4>Why build Linux from source code?<a name="Why_build_Linux_from_source_code"></a></h4>

<p>
The most Linux distributions are provided as binary packages.
Many Linux vendors stop provide 32bit versions. Sometime they provide non-well updates, and it's take a time to resolve problems (issues).
So, at first, it's about achieving independence and reliability.
</p>

</div>
<div class="section">
<h4>Building/compiling methods.<a name="Buildingcompiling_methods."></a></h4>

<p>
  The first method is the native compiling method into the current root &quot;/&quot;. You can compile by this method any high-level application, e.g. a music player.
  It's needed a building environment to do this. This is a minimum set of program and libraries, such as glibc, gcc, binutils, bash...
  To make a building environment from source code you should use the cross compiling method.
</p>

<p>
  The second method is cross-compiling. This is building a binary into a different root, even for different architecture, e.g. building for an ARM (tablet OS) on a x86 PC.
  This is only method for tablet's/mobile's OS.
  There are the four main standard variables to do this:
  </p>
<ul>
    
<li>--sysroot - tells compiler where search the headers, and to linker where search the libs (where is the new sysroot)</li>
    
<li>DESTDIR - tells &quot;make&quot; where is the new root directory to install this software</li>
    
<li>--host - tells &quot;configure&quot; what is target (built/compiled) architecture</li>
    
<li>--build - tells &quot;configure&quot; what is building(compiling) architecture, without it &quot;configure&quot; will think that it's a native compiling, and &quot;host&quot; just point to proper sub-architecture, e.g. i786-pc-linux-gnu</li>
  </ul>
  There is also &quot;--target&quot; for building compiler tools for cross-compiling (gcc, binutils).


<p>There is also compiling with CHROOT method, it is native-like method, LFS uses it. This method can't be used for different architecture or for too different versions of compiling and compiled (target) systems, e.g. compiling Linux has kernel4 and glibc2.24, but compiled Linux has kernel5 and glibc2.31(with minimum kernel 5).</p>

<p>Autotools's --host, --build and --target vars are also used for compiling for current computer multi-arch tools and libs.</p>


<p>The main problem is that even low level software doesn't respect cross compiling with &quot;--sysroot&quot; method.
Only compilers properly treat &quot;--sysroot&quot;, i.e. they search the headers in the &quot;target root&quot;. Native LD treats  &quot;--sysroot&quot; as &quot;additional root&quot;, so you must pass &quot;-L[DIR]&quot; to change priority of target libs.
Autotools also mix native and target roots.
Built(compiled) software may run just compiled libraries for building itself, so it will fail for different architecture target.
Even though CHROOT method often faces such problems, e.g. coreutils's error help2man: can't get `--help' info from man/dir.td/dir.
It seems that the cause is confusing about native and target libraries/settings files.
Testing is also the problem (in case of cross-compiling for a regular computer).
Of course, special building systems for tablet's OS handle those problems.
</p>


<p>
  Classic building (native compiling on a regular computer) deals with already installed libraries. It's often deal with cross (mutual) dependencies, e.g. compiling SYSTEMD depends on DBUS and vice versa.
  Even though the main library GLIBC requires SELINUX for supporting it (of course, it's never be linked to libselinux), so repeated compiling is needed for software with cross(mutual)-dependencies.
  You can check it by configuring GLIBC with &quot;--with-selinux&quot;, it will blame if SELinux library not found.
  Facing two facts - &quot;repeated compiling because of cross(mutual) dependencies&quot; and &quot;cross-testing problem&quot; leads to proper way of building LFSC:
  </p>
<ol style="list-style-type: decimal">
    
<li>pure cross-compiling (without chroot) including building software (gcc, binutils, make, etc.), i.e. making raw LFSC</li>
    
<li>pure native-compiling (including tests and cross(mutual) dependences) all software again on newly born raw LFSC</li>
  </ol>
  It's used truly &quot;cross-compiling&quot; (without chroot) then &quot;native-compiling&quot; methods for making Beigesoft&#x2122; Linux From Source Code multi-arch (64/32bit) since version 1.5.
  32bit libs (i386) are needed for Android developing. x32 seems to be useless.


<p>
  Because of cross-compiling is difficult in many cases, since version 1.6 LFSC is built in this way:
  </p>
<ol style="list-style-type: decimal">
    
<li>cross-compiling minimal self-build-able Linux with building software (gcc, binutils, make, etc.) without many ones like systemd. It will be kernel, bash (as init program), nano, m4...</li>
    
<li>native-compiling stage 1 without testing up to systemd and dbus on init-bash booted LFSC.</li>
    
<li>native-compiling/recompiling stage 2 (including tests and cross(mutual) dependencies) all other software on init-systemd booted LFSC</li>
  </ol>
  Since version 1.6 it's used the newest software source code to build LFSC, e.g. Kernel-5.5.2, GLIBC-2.31, SystemD-244, Gcc-9.3.0...
  Building system is still the same - Debian 9.


  
<p>Screenshot LFSC 1.8:</p>
  
<p align="center"><img src="1.1/lfsc18a.png" style="max-width: 100%" alt="" /></p>


<p>
The work was done on Debian 9. It already has cross-compilers for most architectures.
</p>


<p>
You can download source code (set of bash-scripts and instructions) from <a class="externalLink" href="https://sourceforge.net/projects/linux-from-source-code/">https://sourceforge.net/projects/linux-from-source-code/</a>
(or <a href="1.1/lfsc-1.8.tar.xz">lfsc-1.8.tar.xz</a>)
</p>

<p>
References:
</p>
<ul>
  
<li><a class="externalLink" href="https://wiki.debian.org/Multiarch">about multi-arch/cross-compiling https://wiki.debian.org/Multiarch</a></li>
  
<li>Linux From Scratch (LFS) http://www.linuxfromscratch.org</li>
  
<li><a class="externalLink" href="https://trac.clfs.org/">Cross-Compiled Linux From Scratch https://trac.clfs.org/</a></li>
  
<li><a class="externalLink" href="https://www.linuxjournal.com/content/diy-build-custom-minimal-linux-distribution-source">DIY: Build a Custom Minimal Linux Distribution from Source by Petros Koutoupis</a></li>
</ul>





  </div></div>


    </div>
    <div class="clear">
    </div>
    <hr/>
    <div class="footer">
              Copyright &#169;                   2019&#x2013;2021.
           All rights reserved.      
                    
                </div>
  </body>
</html>
